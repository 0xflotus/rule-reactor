!function e(n,t,r){function i(a,s){if(!t[a]){if(!n[a]){var c="function"==typeof require&&require
if(!s&&c)return c(a,!0)
if(o)return o(a,!0)
var u=new Error("Cannot find module '"+a+"'")
throw u.code="MODULE_NOT_FOUND",u}var f=t[a]={exports:{}}
n[a][0].call(f.exports,function(e){var t=n[a][1][e]
return i(t?t:e)},f,f.exports,e,n,t,r)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a])
return i}({1:[function(e,n,t){(function(){"use strict"
function e(e,n,t){var r=[],i={}
return function o(a){if(a===e.length){var s=e.map(function(e,n){return e[i[n]]})
return n?n(s)?r.push(t?t(s):s):r.length:r.push(t?t(s):s)}for(var c=0;c<e[a].length;++c)i[a]=c,o(a+1)}(0),r}function n(e,n,t){for(var r=1,i=e.length,o=0;o<e.length;o++)r*=e[o].length
for(var a={},s=[],c=r,o=0;o<e.length;o++){var u=e[o]
c/=u.length
for(var f=0;r>f;f++){a[f]=a[f]?a[f]:[]
var l=f/c%u.length
if(l=1>l||.5>=l%1?Math.floor(l):Math.min(u.length-1,Math.ceil(l)),a[f].push(u[l]),a[f].length===i){var g=n?n(a[f]):!0
g&&(t?s.push(t(a[f])):s.push(a[f])),delete a[f]}}}return s}function t(e){var n=e+"",t=n.indexOf("(")+1,r=n.indexOf(")"),i=n.substring(t,r).split(",")
return i.forEach(function(e,n){i[n]=e.trim()}),i}function r(e){Object.keys(e.domain).forEach(function(n){var r=e.domain[n]
r.prototype.rules=r.prototype.rules?r.prototype.rules:{},r.prototype.rules[e.name]=e,r.prototype.activeKeys=r.prototype.activeKeys?r.prototype.activeKeys:{},r.exists=function(e){return e=e?e:function(){return!0},r.instances&&r.instances.some(function(n){return e(n)})},r.forall=function(e){return r.instances&&r.instances.every(function(n){return e(n)})},e.range[n]={},e.bindings[n]=e.bindings[n]?e.bindings[n]:[],e.conditions.forEach(function(i){i.crossproducts=[]
var o=t(i)
o.indexOf(n)>=0&&(i.range=i.range?i.range:{},i.range[n]={},(i+"").replace(new RegExp("(\\b"+n+"\\.\\w+\\b)","g"),function(t){var o=t.split("."),a=o[1]
return r.prototype.activeKeys[a]=!0,e.range[n][a]=e.range[n][a]?e.range[n][a]:!0,i.range[n][a]=i.range[n][a]?i.range[n][a]:!0,t}))})
var i=t(e.action)
i.indexOf(n)>=0&&(e.action.domain=e.action.domain?e.action.domain:{},e.action.domain[n]=!0)})}function i(e,n){this.rule=e,this.bindings=n,a.tracelevel>1&&c.log("Activating: ",this.rule,this.bindings)}function o(e,n,t,i,o){this.name=e,this.salience=n,this.domain=t,this.range={},this.conditions=Array.isArray(i)||i instanceof Array?i:[i],this.tests=[],this.action=o,this.bindings={},this.activations=new Map,this.signatures={},this.options={optimize:"stack"},r(this),a.tracelevel>2&&c.log("New Rule: ",this)}var a={},s=n,c={}
c.log=function(){console.log.apply(console,arguments)},i.prototype.execute=function(){a.tracelevel>0&&c.log("Firing: ",this.rule,this.bindings),this["delete"](),this.rule.fire(this.bindings)},i.prototype["delete"]=function(e){if(!e||this.bindings.indexOf(e)>=0){a.tracelevel>1&&c.log("Deactivating: ",this.rule,this.bindings),this.rule.activations["delete"](this)
var n=a.agenda.indexOf(this)
n>=0&&a.agenda.splice(n,1)}},o.prototype.bind=function(e,n){var t=this,r=Object.keys(t.bindings),i=[]
r.map(function(n){e instanceof t.domain[n]&&-1===t.bindings[n].indexOf(e.__rrid__)&&(a.tracelevel>2&&c.log("Binding: ",t,n,e),t.bindings[n].push(e.__rrid__)),i.push(t.bindings[n])}),n&&t.test(e)},o.prototype.fire=function(e){var n=this,t=Object.keys(n.domain),r=[]
Object.keys(n.action.domain).forEach(function(n){r.push(e[t.indexOf(n)])}),n.action.apply(n,r)},o.prototype.setOptions=function(e){var n=this
Object.keys(e).forEach(function(t){n.options[t]=e[t]})},o.prototype.test=function(t,r,o){var u,f=this,l=Object.keys(f.domain),g=s,p=!1
"heap"===f.options.optimize?g=e:"stack"===f.options.optimize&&(g=n),a.tracelevel>2&&c.log("Testing: ",f,t,r)
var d=[]
return l.forEach(function(e){t instanceof f.domain[e]&&d.push(e)}),d.forEach(function(e){if(f.conditions.every(function(n,i){var o=Object.keys(n.range)
if(!o.every(function(e){return f.bindings[e].length>0}))return!1
var s=[]
return o.some(function(i){return(!r||n.range[i][r])&&(i===e?s.push([t.__rrid__]):s.push(f.bindings[i])),s.length===n.length}),s.length<n.length?u?(u=n.crossproducts.filter(function(e){return u.some(function(e){return crossProduct1row.every(function(n,t){return void 0===n||e[t]===n})})}),u.length>0):!1:(u=g(s,function(e){if(-1==e.indexOf(t.__rrid__))return!1
for(var r=new Array(l.length),i=0;i<e.length;i++)r[l.indexOf(o[i])]=e[i]
var s=[]
return e.forEach(function(e){s.push(a.get(e))}),e.indexOf(t.__rrid__)>=0&&n.apply(f,s)&&(!u||u.some(function(e){return e.every(function(e,n){return void 0===e||r[n]===e})}))?(a.tracelevel>2&&c.log("Join: ",f,i,e.length,s),e.fullrow=r,r.row=s,!0):void 0},function(e){return e.fullrow}),u.length>0?(n.crossproducts=u,!0):!1)})&&u){for(var n=0;n<u.length;n++){var o=new i(f,u[n].row)
a.agenda.push(o),f.activations.set(u[n].row,o)}p=!0}}),o?void o(null,p):!1},o.prototype.reset=function(e,n,t){var r,i=this,o=Object.keys(i.bindings)
n&&t&&!o.some(function(e){return n instanceof i.domain[e]&&i.range[e][t]})||(n?o.map(function(e){if(n instanceof i.domain[e]){var t=i.crossProducts.get(e)
t&&t.forEach(function(e){if(e.indexOf(n)>=0){var t=i.activations.get(e)
t&&t["delete"]()}})}}):i.crossProducts.forEach(function(e){e.forEach(function(e){r=i.activations.get(e),r&&r.forEach(function(e){e["delete"]()})})}),e&&i.test(n))},o.prototype.unbind=function(e){var n=this,t=Object.keys(n.bindings)
t.map(function(t){if(e instanceof n.domain[t]){var r=n.crossProducts.get(t)
if(r)for(var i=r.length-1;i>=0;i--)if(r[i].indexOf(e)>=0){var o=n.activations.get(r[i])
a.tracelevel>2&&c.log("Unjoin: ",n,r[i]),r.splice(i,1),o&&o["delete"]()}}}),t.map(function(t){var r=n.bindings[t].indexOf(e)
r>=0&&(a.tracelevel>2&&c.log("Unbinding: ",n,t,e),n.bindings[t].splice(r,1))})},a.rules={},a.data=[],new Map,a.agenda=[],a.createRule=function(e,n,t,r,i){var s=new o(e,n,t,r,i)
return a.rules[s.name]=s,s},a.get=function(e){return"number"==typeof e?a.data[e]:a.data[a.data.indexOf(e)]},a.insert=function(e,n){e=Array.isArray(e)||e instanceof Array?e:[e],e.forEach(function(e){if(e&&"object"==typeof e&&void 0===e.__rrid__){a.tracelevel>2&&c.log("Insert: ",e),Object.defineProperty(e,"__rrid__",{value:a.data.length}),a.data.push(e),e.constructor.instances=e.constructor.instances?e.constructor.instances:[],e.constructor.instances.push(e)
var n=Object.keys(e)
e.activeKeys&&Object.keys(e.activeKeys).forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n.forEach(function(n){function t(){return t.value}function r(r){return t.value!==r?(t.value=r,Object.keys(e.rules).forEach(function(t){e.rules[t].test(e,n)}),r&&r.rules&&a.insert(r),t.value):void 0}var i,o=Object.getOwnPropertyDescriptor(e,n)
if(o&&(i={},Object.keys(o).forEach(function(e){i[e]=o[e]})),o=o?o:{enumerable:!0,configurable:!1},!o.get||"rrget"!==o.get.name){if(t.value=o.value,t.originalDescriptor=i,o.value instanceof Array||Array.isArray(o.value)){var s=o.value
i.value=s.slice()
var c=["push","pop","splice","shift","unshift"]
c.forEach(function(r){var i=s[r]
if("function"==typeof i){var o=function(){i.apply(s,arguments),Object.keys(e.rules).forEach(function(t){e.rules[t].test(e,n)})}
Object.defineProperty(t.value,r,{configurable:!0,writable:!0,value:o})}}),Object.getOwnPropertyNames(Array.prototype).forEach(function(e){var n=s[e]
"function"==typeof n&&-1===c.indexOf(e)&&Object.defineProperty(t.value,e,{configurable:!0,writable:!0,value:function(){return n.apply(s,arguments)}})})}delete o.value,delete o.writable,o.get=t,o.set=r,Object.defineProperty(e,n,o)}})}}),e.forEach(function(e){e.rules&&Object.keys(e.rules).forEach(function(n){e.rules[n].bind(e)})}),e.forEach(function(e){e.rules&&Object.keys(e.rules).forEach(function(n){e.rules[n].test(e)})}),n&&n(null)},a.not=function(e){return!e},a.remove=function(){var e=e=arguments[arguments.length-1]instanceof Object?!1:arguments[arguments.length-1],n=[].slice.call(arguments)
n.forEach(function(e){e&&"object"==typeof e&&(a.tracelevel>2&&c.log("Remove: ",e),a.data["delete"](e),Object.keys(e).forEach(function(n){var t=Object.getOwnPropertyDescriptor(e,n)
if("rrget"===t.get.name)if("undefined"==typeof t.get.originalDescriptor)delete e[n]
else{if(t.get.originalDescriptor.value instanceof Array||Array.isArray(t.get.originalDescriptor.value))if(e[n]instanceof Array||Array.isArray(e[n])){var r=[0,e[n]].concat(t.get.originalDescriptor.value)
e[n].splice.apply(e[n],r)}else e[n]=t.get.originalDescriptor.value
Object.defineProperty(e,n,t.get.originalDescriptor)}}),Object.keys(e.rules).forEach(function(n){e.rules[n].unbind(e)}))}),n.forEach(function(e){e&&"object"==typeof e&&e.rules&&Object.keys(e.rules).forEach(function(n){e.rules[n].test(e)})}),e&&setTimeout(function(){a.run()})},a.reset=function(e){if(Object.keys(a.rules).forEach(function(e){a.rules[e].reset()}),e){var n=[]
a.data.forEach(function(e){n.push(e)}),n.push(!1),a.remove(!1)}},a.run=function(e,n,t){function r(n){for(;a.agenda.length>0&&a.run.executions<e;)if(a.run.executions++,a.agenda[a.agenda.length-1].execute(),n)return void setTimeout(r,0,n)
a.run.stop=new Date,a.run.rps=a.run.executions/(a.run.stop.getTime()-a.run.start.getTime())*1e3,a.run.running=!1,"function"==typeof t&&t()}return e=e?e:1/0,a.run.running?!0:(a.run.running=!0,a.run.executions=0,a.run.start=new Date,a.tracelevel>0&&c.log("Run: ",e,n),void r(n))},a.trace=function(e){a.tracelevel=e},this.exports?this.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):this.RuleReactor=a}).call("undefined"!=typeof window?window:"undefined"!=typeof n?n:null)},{}]},{},[1])
